# Contributing to HA-AsusRouter

This document describes the basics of contributing to the **HA-AsusRouter** project.

_This file was auto-generated by **GitHub Copilot**, so minor adjustments may be needed. If you notice any issues or have suggestions for improvement, please feel free to submit a pull request or open an issue._

This project uses [uv](https://github.com/astral-sh/uv), [pre-commit](https://pre-commit.com/), and [Visual Studio Code](https://code.visualstudio.com/).

Please follow these guidelines for a smooth development experience.

---

## Development Environment Setup

1. **Clone the repository**

   ```sh
   git clone https://github.com/Vaskivskyi/ha-asusrouter.git
   cd ha-asusrouter
   ```

2. **Python Virtual Environment**

   - The project uses a `.venv` in the root directory.
   - Create it with:
     ```sh
     uv venv
     ```
   - In VS Code, select the interpreter from `.venv` via the Command Palette:
     `Python: Select Interpreter`.

3. **Install dependencies**

   - Install all dependencies with:
     ```sh
     uv sync --all-groups
     ```

4. **Install pre-commit hooks**

   - Install pre-commit if not already installed:
     ```sh
     uv pip install pre-commit
     ```
   - Set up the hooks:
     ```sh
     pre-commit install
     ```
   - (Optional but recommended) Run on all files to check/fix the codebase:
     ```sh
     pre-commit run --all-files
     ```
   - **Note:** All commits will be checked by pre-commit hooks. You must fix any issues before committing.

5. **VS Code Workspace**

   - The `.vscode` folder is versioned and contains:
     - **Recommended extensions** (`extensions.json`)
     - **Editor settings example** (`settings.example.json`)
     - **Common tasks** (`tasks.json`)
   - VS Code should prompt you to install recommended extensions on open.

---

## Recommended VS Code Extensions

These are listed in `.vscode/extensions.json` and will be suggested automatically:

- [Ruff](https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff) (`charliermarsh.ruff`)
- [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) (`esbenp.prettier-vscode`)
- [Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python) (`ms-python.python`)

---

## Recommended VS Code Settings

These are already included in `.vscode/settings.example.json`:

```jsonc
{
  "editor.formatOnSave": true,
  "[python]": {
    "editor.codeActionsOnSave": {
      "source.fixAll": "explicit",
      "source.organizeImports": "explicit"
    },
    "editor.defaultFormatter": null
  },
  "python.analysis.typeCheckingMode": "basic",
  "mypy-type-checker.args": ["--config-file=${workspaceFolder}/mypy.ini"],
  "mypy-type-checker.interpreter": [
    "${workspaceFolder}/.venv/Scripts/python.exe", // Windows path
    "${workspaceFolder}/.venv/bin/python" // Unix-like path
  ],
  "python-envs.defaultEnvManager": "ms-python.python:venv",
  "python-envs.pythonProjects": [],
  "ruff.configuration": "${workspaceFolder}/pyproject.toml",
  "ruff.path": [
    "${workspaceFolder}/.venv/Scripts/ruff.exe", // Windows path
    "${workspaceFolder}/.venv/bin/ruff" // Unix-like path
  ]
}
```

**You need to use ONLY a single mypy interpreter path and single ruff path depending on your OS.**

---

## Code Style, Linting and Checks

- **Ruff** is used for linting and formatting.
  Code style is enforced automatically via pre-commit and VS Code settings.
- **mypy** is used for type checking.
- **pre-commit** is required for all commits.
  You must run `pre-commit install` after cloning (see setup above) to ensure all commits are checked locally.
  PRs that do not pass pre-commit checks will be blocked until they are fixed.

---

## Pull Requests

- Ensure all pre-commit hooks pass before pushing.
- Make sure your code is covered by tests.
- Describe your changes clearly in the PR description.

---

## Need Help?

If you have any questions or issues, please open an issue on [GitHub](https://github.com/Vaskivskyi/ha-asusrouter/issues).

---
